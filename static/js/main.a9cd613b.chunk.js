(this["webpackJsonptic-tac-toe"]=this["webpackJsonptic-tac-toe"]||[]).push([[0],{10:function(n,e,t){n.exports={cell:"Cell_cell__3-ueS"}},11:function(n,e,t){n.exports={panel:"GameInfo_panel__z95Da"}},16:function(n,e,t){},22:function(n,e,t){},23:function(n,e,t){"use strict";t.r(e);var i,r,c=t(0),l=t.n(c),a=t(3),o=t.n(a),s=(t(16),t(2)),u=t(8),d=t.n(u),f=t(4),h=t(9);!function(n){n[n.First=0]="First",n[n.Second=1]="Second"}(i||(i={})),function(n){n[n.X=0]="X",n[n.O=1]="O"}(r||(r={}));var j=function(n,e){return"".concat(n,"_").concat(e)},v=function(n,e){for(var t=[],i=0;i<2*n.winCondition;i++){var r=e(n.x,n.y,n.winCondition,i),c=j(r.x,r.y),l=n.cells[c];l&&t.push(Object(h.a)(Object(h.a)({},l),{},{x:r.x,y:r.y}))}return t},x=function(n,e){for(var t,c=0,l=0,a=0;a<n.length;a++){if(null!==n[a].state)if(l=a,c>0)n[a-1].state===n[a].state?c++:c=1;else c++;else c=0;if(c===e)return{winningCells:n.slice(l,e),winner:(t=n[l].state,null===t?null:t===r.X?i.First:i.Second)}}return{winningCells:[],winner:null}},y=100,w={initiative:i.First,cells:function(){var n={};return Array(y).fill(null).forEach((function(e,t){Array(y).fill(null).forEach((function(e,i){var r="".concat(t,"_").concat(i);n[r]={state:null,x:t,y:i}}))})),n}(),gameFieldSideLength:y,winCondition:parseInt("5",10),winner:null,gameFinished:!1,cellsWithValues:0},b=Object(f.b)({name:"field",initialState:w,reducers:{playerMove:function(n,e){if((0!==n.cellsWithValues||n.initiative!==i.First||0===e.payload.x&&0===e.payload.y)&&!n.gameFinished){n.initiative=n.initiative===i.First?i.Second:i.First;var t=j(e.payload.x,e.payload.y),c=n.cells[t];c&&(c.state=n.initiative===i.First?r.X:r.O,null!==c.state?c.state=c.state===r.X?r.O:r.X:c.state=r.X),null!==c.state&&n.cellsWithValues++,n.winner=function(n,e,t,i){var r,c,l,a={cells:n,x:e,y:t,winCondition:i},o=v(a,(function(n,e,t,i){return{x:n-t+i,y:e-t+i}})),s=v(a,(function(n,e,t,i){return{x:n-t+i,y:e+t-i}})),u=v(a,(function(n,e,t,i){return{x:n-t+i,y:e}})),d=v(a,(function(n,e,t,i){return{x:n,y:e-t+i}}));return null!==(r=null!==(c=null!==(l=x(o,i).winner)&&void 0!==l?l:x(s,i).winner)&&void 0!==c?c:x(u,i).winner)&&void 0!==r?r:x(d,i).winner}(n.cells,e.payload.x,e.payload.y,n.winCondition),null!==n.winner&&(n.gameFinished=!0),n.cellsWithValues===Math.pow(y,2)&&(n.gameFinished=!0)}}}}),O=b.actions.playerMove,p=(b.reducer,Object(f.a)({reducer:{field:b.reducer}})),m=s.c,F=t(10),g=t.n(F),_=t(1),C=function(n){var e=n.x,t=n.y,i=Object(s.b)(),l=m((function(n){return n.field.cells[j(e,t)]})),a=Object(c.useCallback)((function(n){return n===r.X?"X":n===r.O?"O":""}),[]);return Object(_.jsx)("button",{className:g.a.cell,disabled:null!==l.state,onClick:function(){return i(O({x:e,y:t}))},"data-testid":"cell_".concat(e,"_").concat(t),children:a(l.state)})},S=t(11),X=t.n(S);function k(){var n=m((function(n){return n.field.initiative})),e=m((function(n){return n.field.winner})),t=m((function(n){return n.field.gameFinished})),r="";return e===i.First?r="first":e===i.Second&&(r="second"),Object(_.jsxs)("div",{className:X.a.panel,children:[Object(_.jsx)("div",{children:"First move is always to left top cell with (0,0) coordinates."}),Object(_.jsxs)("div",{children:["It's ",n===i.First?"first":"second"," player's turn!"]}),Object(_.jsxs)("div",{children:["Game finished: ",t?"yes":"no"]}),r&&Object(_.jsxs)("div",{children:["Winner is: ",r," player!"]})]})}var W=s.c;function M(){var n=W((function(n){return n.field.gameFieldSideLength})),e=Object(c.useMemo)((function(){return Array(n).fill(null)}),[n]),t=W((function(n){return n.field.winner})),r=W((function(n){return n.field.gameFinished})),l=Object(c.useMemo)((function(){return e.map((function(n,t){return Object(_.jsx)("div",{className:d.a.row,children:e.map((function(n,e){return Object(_.jsx)(C,{x:t,y:e},j(t,e))}))},"row_".concat(t))}))}),[e]);return Object(c.useEffect)((function(){null!==t?alert("Winner is ".concat(t===i.First?"first":"second"," player! Congratulations")):r&&alert("Game has finished!")}),[t,r]),Object(_.jsxs)("div",{className:d.a.field,children:[l,Object(_.jsx)(k,{})]})}t(22);var N=function(){return Object(_.jsx)(s.a,{store:p,children:Object(_.jsx)("div",{className:"App",children:Object(_.jsx)(M,{})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(_.jsx)(l.a.StrictMode,{children:Object(_.jsx)(s.a,{store:p,children:Object(_.jsx)(N,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(n){n.unregister()})).catch((function(n){console.error(n.message)}))},8:function(n,e,t){n.exports={field:"Field_field__3JLdk",row:"Field_row__1zs4k"}}},[[23,1,2]]]);
//# sourceMappingURL=main.a9cd613b.chunk.js.map